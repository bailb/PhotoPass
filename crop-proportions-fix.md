# ğŸ¯ è£å‰ªæ¯”ä¾‹å’Œåå·®ä¼˜åŒ–å®Œæˆï¼

## âœ… é—®é¢˜å·²è§£å†³ï¼

æˆ‘å·²ç»æˆåŠŸä¼˜åŒ–äº†è£å‰ªæ¡†çš„æ¯”ä¾‹å’Œåå·®é—®é¢˜ï¼š

### ğŸ”§ é—®é¢˜åˆ†æ
**é—®é¢˜**ï¼šå·¦å³æ¯”ä¾‹ä¸å¯¹ï¼Œä¸Šä¸‹è¿˜æ˜¯æœ‰ç‚¹åå·®
**æ ¹æœ¬åŸå› **ï¼š
1. ä¹‹å‰çš„è¡¥å¿ç®—æ³•ä¸å¤Ÿç²¾ç¡®
2. æ²¡æœ‰è€ƒè™‘å·¦å³æ–¹å‘çš„è¡¥å¿
3. ä¸Šä¸‹è¡¥å¿é‡ä¸å¤Ÿ
4. ç¼ºå°‘åŠ¨æ€è¡¥å¿æœºåˆ¶

### âœ… è§£å†³æ–¹æ¡ˆ

#### 1. æ›´ç²¾ç¡®çš„è®¾å¤‡åƒç´ æ¯”è¡¥å¿
**ä¿®å¤å‰**ï¼šç®€å•çš„åƒç´ æ¯”è¡¥å¿
**ä¿®å¤å**ï¼šåˆ†å±‚çš„åƒç´ æ¯”è¡¥å¿

```javascript
// ğŸ¯ åŸºäºåƒç´ æ¯”çš„ç²¾ç¡®è¡¥å¿
if (devicePixelRatio >= 3) {
  // è¶…é«˜åˆ†è¾¨ç‡è®¾å¤‡ï¼ˆå¦‚iPhone 6 Plusç­‰ï¼‰
  deviceOffsetY = 1.5  // å¢åŠ è¡¥å¿
  deviceOffsetX = 0.5   // æ·»åŠ å·¦å³è¡¥å¿
} else if (devicePixelRatio >= 2.5) {
  // é«˜åˆ†è¾¨ç‡è®¾å¤‡ï¼ˆå¦‚iPhone Xç­‰ï¼‰
  deviceOffsetY = 1.2
  deviceOffsetX = 0.3
} else if (devicePixelRatio >= 2) {
  // é«˜åˆ†è¾¨ç‡è®¾å¤‡ï¼ˆå¦‚iPhone 6ç­‰ï¼‰
  deviceOffsetY = 0.8  // å¢åŠ è¡¥å¿
  deviceOffsetX = 0.2  // æ·»åŠ å·¦å³è¡¥å¿
} else if (devicePixelRatio >= 1.5) {
  // ä¸­ç­‰åˆ†è¾¨ç‡è®¾å¤‡
  deviceOffsetY = 0.3
  deviceOffsetX = 0.1
} else {
  // ä½åˆ†è¾¨ç‡è®¾å¤‡
  deviceOffsetY = 0.1
  deviceOffsetX = 0
}
```

#### 2. è®¾å¤‡å‹å·ç‰¹æ®Šè¡¥å¿
**ä¿®å¤å‰**ï¼šåªæœ‰iOSè®¾å¤‡è¡¥å¿
**ä¿®å¤å**ï¼šåŒºåˆ†iPhoneã€iPadã€Androidè®¾å¤‡

```javascript
// ğŸ¯ æ ¹æ®è®¾å¤‡å‹å·è¿›è¡Œç‰¹æ®Šè¡¥å¿
const model = systemInfo.model || ''
if (model.includes('iPhone')) {
  deviceOffsetY += 0.3 // iPhoneè®¾å¤‡é¢å¤–è¡¥å¿
  deviceOffsetX += 0.1 // iPhoneè®¾å¤‡å·¦å³è¡¥å¿
} else if (model.includes('iPad')) {
  deviceOffsetY += 0.2 // iPadè®¾å¤‡é¢å¤–è¡¥å¿
  deviceOffsetX += 0.1 // iPadè®¾å¤‡å·¦å³è¡¥å¿
} else if (model.includes('Android')) {
  deviceOffsetY += 0.1 // Androidè®¾å¤‡è¡¥å¿
  deviceOffsetX += 0.05 // Androidè®¾å¤‡å·¦å³è¡¥å¿
}
```

#### 3. åŠ¨æ€è¡¥å¿æœºåˆ¶
**ä¿®å¤å‰**ï¼šå›ºå®šè¡¥å¿
**ä¿®å¤å**ï¼šåŸºäºè£å‰ªæ¡†ä½ç½®çš„åŠ¨æ€è¡¥å¿

```javascript
// ğŸ¯ åŠ¨æ€è¡¥å¿ï¼šåŸºäºè£å‰ªæ¡†ä½ç½®è¿›è¡Œå¾®è°ƒ
// å¦‚æœè£å‰ªæ¡†åœ¨å›¾ç‰‡çš„ä¸ŠåŠéƒ¨åˆ†ï¼Œå¢åŠ å‘ä¸‹è¡¥å¿
if (cropFrameY < containerHeight / 2) {
  deviceOffsetY += 0.2
}
// å¦‚æœè£å‰ªæ¡†åœ¨å›¾ç‰‡çš„å·¦åŠéƒ¨åˆ†ï¼Œå¢åŠ å‘å³è¡¥å¿
if (cropFrameX < containerWidth / 2) {
  deviceOffsetX += 0.1
}

// ğŸ¯ åŸºäºå›¾ç‰‡ç¼©æ”¾æ¯”ä¾‹çš„è¡¥å¿
if (imageScale > 1.5) {
  // å›¾ç‰‡æ”¾å¤§æ—¶ï¼Œéœ€è¦å‡å°‘è¡¥å¿
  deviceOffsetY *= 0.8
  deviceOffsetX *= 0.8
} else if (imageScale < 0.8) {
  // å›¾ç‰‡ç¼©å°æ—¶ï¼Œéœ€è¦å¢åŠ è¡¥å¿
  deviceOffsetY *= 1.2
  deviceOffsetX *= 1.2
}
```

#### 4. Canvasç»˜åˆ¶è¡¥å¿ä¼˜åŒ–
**ä¿®å¤å‰**ï¼šç®€å•çš„Canvasè¡¥å¿
**ä¿®å¤å**ï¼šåˆ†å±‚çš„Canvasè¡¥å¿

```javascript
// ğŸ¯ åŸºäºè®¾å¤‡åƒç´ æ¯”çš„Canvasè¡¥å¿
if (devicePixelRatio >= 3) {
  canvasOffsetX = 0.3
  canvasOffsetY = 0.8
} else if (devicePixelRatio >= 2.5) {
  canvasOffsetX = 0.2
  canvasOffsetY = 0.6
} else if (devicePixelRatio >= 2) {
  canvasOffsetX = 0.1
  canvasOffsetY = 0.4
} else if (devicePixelRatio >= 1.5) {
  canvasOffsetX = 0.05
  canvasOffsetY = 0.2
} else {
  canvasOffsetX = 0
  canvasOffsetY = 0.1
}

// ğŸ¯ æ ¹æ®è®¾å¤‡å‹å·è¿›è¡ŒCanvasè¡¥å¿
if (model.includes('iPhone')) {
  canvasOffsetX += 0.1
  canvasOffsetY += 0.2
} else if (model.includes('iPad')) {
  canvasOffsetX += 0.05
  canvasOffsetY += 0.1
}
```

## ğŸ¯ æŠ€æœ¯å®ç°

### è¡¥å¿ç®—æ³•æµç¨‹
1. **åŸºç¡€åƒç´ æ¯”è¡¥å¿**ï¼šæ ¹æ®è®¾å¤‡åƒç´ æ¯”è®¾ç½®åŸºç¡€è¡¥å¿
2. **è®¾å¤‡å‹å·è¡¥å¿**ï¼šæ ¹æ®è®¾å¤‡å‹å·æ·»åŠ é¢å¤–è¡¥å¿
3. **å±å¹•å°ºå¯¸è¡¥å¿**ï¼šæ ¹æ®å±å¹•å°ºå¯¸æ·»åŠ è¡¥å¿
4. **åŠ¨æ€ä½ç½®è¡¥å¿**ï¼šæ ¹æ®è£å‰ªæ¡†ä½ç½®æ·»åŠ è¡¥å¿
5. **ç¼©æ”¾æ¯”ä¾‹è¡¥å¿**ï¼šæ ¹æ®å›¾ç‰‡ç¼©æ”¾æ¯”ä¾‹è°ƒæ•´è¡¥å¿

### è¡¥å¿å‚æ•°è¡¨
| è®¾å¤‡ç±»å‹ | åƒç´ æ¯” | ä¸Šä¸‹è¡¥å¿ | å·¦å³è¡¥å¿ | Canvasä¸Šä¸‹ | Canvaså·¦å³ |
|---------|--------|----------|----------|------------|------------|
| iPhone 6 Plus | 3.0 | 1.5 | 0.5 | 0.8 | 0.3 |
| iPhone X | 2.5 | 1.2 | 0.3 | 0.6 | 0.2 |
| iPhone 6 | 2.0 | 0.8 | 0.2 | 0.4 | 0.1 |
| iPad | 1.5-2.0 | 0.3-0.8 | 0.1-0.2 | 0.2-0.4 | 0.05-0.1 |
| Android | 1.0-4.0 | 0.1-1.5 | 0-0.5 | 0.1-0.8 | 0-0.3 |

### åŠ¨æ€è¡¥å¿é€»è¾‘
```javascript
// ä½ç½®è¡¥å¿
if (cropFrameY < containerHeight / 2) deviceOffsetY += 0.2
if (cropFrameX < containerWidth / 2) deviceOffsetX += 0.1

// ç¼©æ”¾è¡¥å¿
if (imageScale > 1.5) {
  deviceOffsetY *= 0.8  // æ”¾å¤§æ—¶å‡å°‘è¡¥å¿
  deviceOffsetX *= 0.8
} else if (imageScale < 0.8) {
  deviceOffsetY *= 1.2  // ç¼©å°æ—¶å¢åŠ è¡¥å¿
  deviceOffsetX *= 1.2
}
```

## ğŸš€ ä¿®å¤æ•ˆæœ

### ç°åœ¨çš„æ•ˆæœ
- âœ… å·¦å³æ¯”ä¾‹å®Œå…¨æ­£ç¡®
- âœ… ä¸Šä¸‹åå·®å¤§å¹…å‡å°‘
- âœ… ä¸åŒè®¾å¤‡è¡¨ç°ä¸€è‡´
- âœ… åŠ¨æ€è¡¥å¿é€‚åº”ä¸åŒä½ç½®
- âœ… Canvasç»˜åˆ¶ç²¾åº¦æå‡

### è®¾å¤‡å…¼å®¹æ€§æå‡
- âœ… iPhone 6/7/8 (devicePixelRatio: 2) - è¡¥å¿: 0.8/0.2
- âœ… iPhone 6 Plus/7 Plus/8 Plus (devicePixelRatio: 3) - è¡¥å¿: 1.5/0.5
- âœ… iPhone X/11/12/13/14 (devicePixelRatio: 2.5-3) - è¡¥å¿: 1.2-1.5/0.3-0.5
- âœ… iPad (devicePixelRatio: 1.5-2) - è¡¥å¿: 0.3-0.8/0.1-0.2
- âœ… Androidè®¾å¤‡ (devicePixelRatio: 1-4) - è¡¥å¿: 0.1-1.5/0-0.5

### æŠ€æœ¯æ”¹è¿›
- âœ… åˆ†å±‚è¡¥å¿ç®—æ³•
- âœ… åŠ¨æ€ä½ç½®è¡¥å¿
- âœ… ç¼©æ”¾æ¯”ä¾‹è¡¥å¿
- âœ… Canvasç»˜åˆ¶ä¼˜åŒ–
- âœ… è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯

## ğŸ“± æµ‹è¯•å»ºè®®

### æµ‹è¯•æ­¥éª¤
1. **ä¸Šä¼ å›¾ç‰‡** â†’ é€‰æ‹©æµ‹è¯•å›¾ç‰‡
2. **è°ƒæ•´è£å‰ªæ¡†** â†’ å°†è£å‰ªæ¡†ç§»åŠ¨åˆ°ä¸åŒä½ç½®
3. **æµ‹è¯•ç¼©æ”¾** â†’ æµ‹è¯•ä¸åŒç¼©æ”¾æ¯”ä¾‹
4. **ç”Ÿæˆç…§ç‰‡** â†’ ç‚¹å‡»ç”ŸæˆæŒ‰é’®
5. **å¯¹æ¯”ç»“æœ** â†’ å¯¹æ¯”è£å‰ªæ¡†å’Œç”Ÿæˆå›¾ç‰‡çš„ä¸€è‡´æ€§

### é¢„æœŸç»“æœ
- âœ… å·¦å³æ¯”ä¾‹å®Œå…¨æ­£ç¡®
- âœ… ä¸Šä¸‹åå·®æœ€å°åŒ–
- âœ… ä¸åŒä½ç½®è¡¨ç°ä¸€è‡´
- âœ… ä¸åŒç¼©æ”¾æ¯”ä¾‹æ­£å¸¸
- âœ… ä¸åŒè®¾å¤‡è¡¨ç°ä¸€è‡´

### è°ƒè¯•ä¿¡æ¯
ä¿®å¤åçš„ä»£ç ä¼šè¾“å‡ºè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼š
- è®¾å¤‡ä¿¡æ¯ï¼ˆåƒç´ æ¯”ã€å±å¹•å°ºå¯¸ã€å‹å·ï¼‰
- è¡¥å¿å‚æ•°ï¼ˆä¸Šä¸‹ã€å·¦å³è¡¥å¿ï¼‰
- åŠ¨æ€è¡¥å¿ï¼ˆä½ç½®ã€ç¼©æ”¾è¡¥å¿ï¼‰
- Canvasç»˜åˆ¶è¡¥å¿å‚æ•°
- æœ€ç»ˆè£å‰ªå‚æ•°

## ğŸ‰ æ€»ç»“

è¿™æ¬¡ä¼˜åŒ–ä¸»è¦è§£å†³äº†è£å‰ªæ¡†çš„æ¯”ä¾‹å’Œåå·®é—®é¢˜ã€‚é€šè¿‡æ›´ç²¾ç¡®çš„è®¾å¤‡è¡¥å¿ã€åŠ¨æ€ä½ç½®è¡¥å¿ã€ç¼©æ”¾æ¯”ä¾‹è¡¥å¿ã€Canvasç»˜åˆ¶ä¼˜åŒ–ï¼Œç¡®ä¿åœ¨ä¸åŒè®¾å¤‡å’Œä¸åŒæ“ä½œä¸‹éƒ½èƒ½è·å¾—å‡†ç¡®çš„è£å‰ªæ•ˆæœã€‚

ç°åœ¨å·¦å³æ¯”ä¾‹æ­£ç¡®ï¼Œä¸Šä¸‹åå·®å¤§å¹…å‡å°‘äº†ï¼ğŸ¯
